<div class="stepper-container">
  <mat-horizontal-stepper #stepper [linear]="true" labelPosition="bottom" style="height: 100%;">  
    <mat-step #firstStep state="work_outline" [completed]="!!selectedServices?.length">
      
      <app-service-selection class="step-component"
        [serviceDefinitions]="serviceDefinitions" 
        (selected)="onServiceSelected()">
      </app-service-selection>

      <button matStepperNext
        mat-raised-button 
        color="primary"  
        [disabled]="!selectedServices || !selectedServices.length">
        Next
      </button>

    </mat-step>
 
    <mat-step #secondStep fxLayout="row" fxLayoutAlign="center center" state="person_outline" [completed]="!!selectedEmployee">

      <app-staff-selection [employees]="employees"
        (selected)="onStaffSelected($event)">
      </app-staff-selection>

    </mat-step>

    <mat-step #thirdStep state="today">

      <app-slot-selection [days]="days"
         [slots]="groupedSlots"
         (selected)="onSlotSelected($event)">
      </app-slot-selection>

    </mat-step>
    
    <mat-step #fourthStep state="receipt">

      <ng-container *ngIf="stepper.selected == fourthStep">
        <app-booking-confirmation [slot]="selectedSlot"
          [services]="selectedServices">
        </app-booking-confirmation>
      </ng-container>

    </mat-step>
  
    <!-- Icon overrides. -->
    <ng-template matStepperIcon="phone">
      <mat-icon>call_end</mat-icon>
    </ng-template>
    <ng-template matStepperIcon="chat">
      <mat-icon>forum</mat-icon>
    </ng-template>
  </mat-horizontal-stepper>

  <mat-progress-bar *ngIf="this.loading || this.authLoading" mode="indeterminate"></mat-progress-bar>
  <!-- TODO: make a little bottom status bar type thing maybe -->
</div>